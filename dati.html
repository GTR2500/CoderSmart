<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tecnical Coder — Dati</title>
  <link rel="stylesheet" href="assets/styles.css" />
  <style>
    /* Stili pagina Dati specifici (usano le variabili del tema) */
    main{max-width:1200px;margin:0 auto;padding:20px}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:14px}
    .btn{background:var(--panel);border:1px solid var(--line);color:var(--text);padding:8px 12px;border-radius:10px;font-size:14px;cursor:pointer}
    .spacer{flex:1}
  </style>
</head>
<body>

  <!-- Header -->
  <header class="app-header">
    <a class="brand" href="https://www.glcgrimaldelli.com" target="_blank" rel="noopener">
      <img class="brand-logo" src="https://www.glcgrimaldelli.com/wp-content/uploads/2019/06/Logo-Sottopagine.jpg" alt="Grimaldelli s.r.l." />
    </a>
    <h1 class="brand-title">Tecnical Coder</h1>
    <button id="themeToggle" class="theme-toggle" title="Cambia tema">
      <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"/></svg>
      <svg class="icon-moon" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
    </button>
  </header>

  <!-- Nav -->
  <div class="subnav">
    <div class="bar">
      <nav>
        <a href="index.html">Generatore</a>
        <a href="istruzioni.html">Istruzioni</a>
        <a class="active" href="dati.html">Dati</a>
      </nav>
    </div>
  </div>

  <main>
    <!-- Toolbar azioni -->
    <div class="toolbar">
      <button class="btn" onclick="history.back()">← Indietro</button>
      <div class="spacer"></div>
      <button class="btn" id="btnSave">Salva</button>
      <button class="btn" id="btnValidate">Valida</button>
      <button class="btn" id="btnReset">Reset default</button>
      <button class="btn" id="btnRemove">Rimuovi override</button>
      <button class="btn" id="btnExport">Esporta JSON</button>
      <label class="btn" for="fileImport">Importa JSON</label>
      <input id="fileImport" type="file" accept="application/json" class="hidden" />
    </div>

    <!-- Tabs -->
    <div class="tabs bar" style="padding:0;margin:0 0 14px 0">
      <nav>
        <a class="active" data-tab="famiglie" href="#famiglie" onclick="activate('famiglie');return false;">Famiglie</a>
        <a data-tab="materiali" href="#materiali" onclick="activate('materiali');return false;">Materiali</a>
        <a data-tab="finiture"  href="#finiture" onclick="activate('finiture');return false;">Finiture</a>
        <a data-tab="tipi"      href="#tipi" onclick="activate('tipi');return false;">Tipi</a>
      </nav>
    </div>

    <!-- Pannelli (usa le classi .panel con bordo arancione) -->
    <section id="view-famiglie" class="panel">
      <div style="display:flex;gap:8px;margin:8px 0 12px">
        <button class="btn" id="addFam">+ Aggiungi famiglia</button>
        <span class="note">D • L • H • Sp • Mat • Fin • Tok → abilita le colonne per quella famiglia</span>
      </div>
      <table>
        <thead>
        <tr>
          <th style="width:120px">Codice</th>
          <th>Descrizione</th>
          <th style="width:60px">D</th>
          <th style="width:60px">L</th>
          <th style="width:60px">H</th>
          <th style="width:60px">Sp</th>
          <th style="width:70px">Mat</th>
          <th style="width:70px">Fin</th>
          <th style="width:70px">Tok</th>
          <th style="width:120px">Azioni</th>
        </tr>
        </thead>
        <tbody id="tbodyFam"></tbody>
      </table>
      <div class="note" id="statusFam"></div>
    </section>

    <section id="view-materiali" class="panel hidden">
      <div style="display:flex;gap:8px;margin:8px 0 12px">
        <button class="btn" id="addMat">+ Aggiungi materiale</button>
        <span class="note">Esempi: S235, S355, AISI 304…</span>
      </div>
      <table>
        <thead><tr><th style="width:120px">Codice</th><th>Descrizione</th><th style="width:120px">Azioni</th></tr></thead>
        <tbody id="tbodyMat"></tbody>
      </table>
    </section>

    <section id="view-finiture" class="panel hidden">
      <div style="display:flex;gap:8px;margin:8px 0 12px">
        <button class="btn" id="addFin">+ Aggiungi finitura</button>
        <span class="note">Esempi: GREZ, VERN, ZINC…</span>
      </div>
      <table>
        <thead><tr><th style="width:120px">Codice</th><th>Descrizione</th><th style="width:120px">Azioni</th></tr></thead>
        <tbody id="tbodyFin"></tbody>
      </table>
    </section>

    <section id="view-tipi" class="panel hidden">
      <div style="display:flex;gap:8px;margin:8px 0 12px">
        <button class="btn" id="addTip">+ Aggiungi tipo</button>
        <span class="note">Esempi: TUB, LAM, STA…</span>
      </div>
      <table>
        <thead><tr><th style="width:120px">Codice</th><th>Descrizione</th><th style="width:120px">Azioni</th></tr></thead>
        <tbody id="tbodyTip"></tbody>
      </table>
    </section>

    <div class="note" id="statusMsg" style="margin-top:8px">Pronto.</div>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="footer-inner">
      <span class="product">&copy; Tecnical Coder</span>
      <span class="for"> per Grimaldelli s.r.l.</span>
      <span class="sep"> — </span>
      <span class="signature">Manuel Zago</span>
    </div>
  </footer>

  <!-- ===== JS: tema + (qui sotto il tuo JS di gestione cataloghi) ===== -->
  <script>
  /* Tema */
  const THEME_KEY='tc.theme';
  const setTheme = t => document.documentElement.setAttribute('data-theme', t);
  (function(){ setTheme(localStorage.getItem(THEME_KEY) || 'dark'); })();
  document.getElementById('themeToggle').addEventListener('click', ()=>{
    const curr = document.documentElement.getAttribute('data-theme')==='light'?'light':'dark';
    const next = curr==='light' ? 'dark' : 'light';
    setTheme(next); localStorage.setItem(THEME_KEY, next);
  });

  /* =======================
     INCOLLA QUI IL TUO JS esistente
     (gestione famiglie/materiali/finiture/tipi, salvataggi, ecc.)
     ======================= */
  </script>
</body>
</html>
